  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE       1

                   **********************************
                   *        CAJA REGISTRADORA               *
                   **********************************
                   PACTL  EQU   $1026
                   PACNT  EQU   $1027
                   ADCTL  EQU   $1030
                   ADR1   EQU   $1031
                   ADR2   EQU   $1032
                   ADR3   EQU   $1033
                   ADR4   EQU   $1034
                   OPTION EQU   $1039

                   PORTA  EQU   $1000
                   PORTD  EQU   $1008
                   PORTE  EQU   $100A
                   PORTG  EQU   $1002

                   DDRA   EQU   $1001
                   DDRD   EQU   $1009
                   DDRG   EQU   $1003

                   TMSK2  EQU   $1024
                   TFLG2  EQU   $1025

                   SCDR   EQU   $102F
                   SCCR2  EQU   $102D
                   SCSR   EQU   $102E
                   SCCR1  EQU   $102C
                   BAUD   EQU   $102B
                   HPRIO  EQU   $103C
                   SPCR   EQU   $1028
                   CSCTL  EQU   $105D
                   OPT2   EQU   $1038

                   C50    EQU   $0032
                   C10    EQU       $000A

                   DIR_BASE EQU  $0060

                   ***********************************
                   *     DECLARACION DE VARIABLES    *
                   ***********************************
                   ORDEN  EQU   $0000      * VARIABLE PARA LEER EL PUERTO SERIAL
                   VAR    EQU   $0001  * ESTA NO SE PARA QUE LA VAYAMOS A
.                  UTILIZAR

                   A      EQU   $0202      * CONTADOR DE ARTICULAS 'A'
                   AU     EQU       $0204  * UNIDADES DE 'A'
                   AD     EQU   $0205  * DECENAS DE 'A'
                   AC     EQU   $0206  * CENTENAS DE 'A'
                   TA     EQU   $0207  * TOTAL DE 'A'

                   B      EQU   $0212      * CONTADOR DE ARTICULOS 'B'
                   BD     EQU       $0214  * DECENAS DE 'B'
                   BC     EQU   $0215  * CENTENAS DE 'B'
                   BUM    EQU   $0216  * UNIDADES DE MILLAR DE 'B'
                   TB     EQU   $0217  * TOTAL DE 'B'

                   C      EQU   $0222      * CONTADOR DE ARTICULOS 'C'
                   CD     EQU       $0224  * DECENAS DE 'C'
                   CC     EQU   $0225  * CENTENAS DE 'C'
                   CUM    EQU   $0226  * UNIDADES DE MILLAR DE 'C'
                   TC     EQU   $0227  * TOTAL DE 'C'

                   D      EQU   $0232  * CONTADOR DE ARTICULOS 'D'
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE       2

                   DC     EQU       $0234  * CENTENAS DE 'D'
                   DUM    EQU   $0235  * UNIDADES DE MILLAR DE 'D'
                   DDM    EQU   $0236  * DECENAS DE MILLAR DE 'D'
                   TD     EQU   $0237  * TOTAL DE 'D'

                   E      EQU   $0242  * CONTADOR DE ARTICULOS 'E'
                   EC     EQU       $0244  * CENTENAS DE 'E'
                   EUM    EQU   $0245  * UNIDADES DE MILLAR DE 'E'
                   EDM    EQU   $0246  * DECENAS DE MILLAR DE 'E'
                   TE     EQU   $0247  * TOTAL DE 'E'

                   F      EQU   $0252      * CONTADOR DE ARTICULOS 'F'
                   FUM    EQU       $0254  * UNIDADES DE MILLAR DE 'F'
                   FDM    EQU   $0255  * DECENAS DE MILLAR DE 'F'
                   FCM    EQU   $0256  * CENTENAS  DE MILLAR DE 'F'
                   TF     EQU   $0257  * TOTAL DE 'F'

                   G      EQU   $0262      * CONTADOR DE ARTICULOS 'G'
                   GUM    EQU       $0264  * UNIDADES DE MILLAR DE 'G'
                   GDM    EQU   $0265  * DECENAS DE MILLAR DE 'G'
                   GCM    EQU   $0266  * CENTENAS  DE MILLAR DE 'G'
                   TG     EQU   $0267  * TOTAL DE 'G'

                   H      EQU   $0272      * CONTADOR DE ARTICULOS 'H'
                   HDM    EQU       $0274  * DECENAS DE MILLAR DE 'H'
                   HCM    EQU   $0275  * CENTENAS  DE MILLAR DE 'H'
                   HUMI   EQU   $0276  * UNIDADES DE MILLON DE 'H'
                   TH     EQU   $0277  * TOTAL DE 'H'

                   I      EQU   $0282      * CONTADOR DE ARTICULOS 'I'
                   IDM    EQU       $0284  * DECENAS DE MILLAR DE 'I'
                   ICM    EQU   $0285  * CENTENAS  DE MILLAR DE 'I'
                   IUMI   EQU   $0286  * UNIDADES DE MILLON DE 'I'
                   IDMI   EQU   $0287  * DECENAS DE MILLON DE 'I'
                   TI     EQU   $0288  * TOTAL DE 'I'

                   J      EQU   $0292  * CONTADOR DE ARTICULOS 'J'
                   JCM    EQU   $0294  * CENTENAS  DE MILLAR DE 'J'
                   JUMI   EQU   $0295  * UNIDADES DE MILLON DE 'J'
                   JDMI   EQU   $0296  * DECENAS DE MILLON DE 'J'
                   TJ     EQU   $0297  * TOTAL DE 'J'

                   ARTT   EQU   $0300      * ARTT es el total de artculos

                   UT     EQU   $0017      * TOTAL EN BCD (UNIDADES, DECENAS,
.                  CENTENAS, ...)
                   DT     EQU   $0016
                   CT     EQU   $0015
                   UMT    EQU   $0014
                   DMT    EQU   $0013
                   CMT    EQU   $0012
                   UMIT   EQU   $0011
                   DMIT   EQU   $0010

                   TOTAL  EQU   $0050
                   SIGNO  EQU   $0002

                   DIR_IMP EQU  $007B

                   ***********************************
                   *      VARIABLES PARA ERROR       *
                   ***********************************

                   ERR1   EQU   $0030
                   ERR2   EQU   $0031
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE       3

                   ERR3   EQU   $0032
                   ERR4   EQU   $0033
                   ERR5   EQU   $0034
                   ERR6   EQU   $0035
                   ERR7   EQU   $0036
                   ERR8   EQU   $0037
                   BCD1   EQU   $0060
                   BCD2   EQU   $0061
                   BCD3   EQU   $0062

                   ***********************************
                   *      INICIO DEL PROGRAMA        *
                   ***********************************

                          ORG   $4000

  4000 4E 55 45 56 NUEVE   FCC   "NUEVEn"
. 4004 45 6E
  4006 4F 43 48 4F OCHO    FCC   "OCHOn"
. 400A 6E
  400B 53 49 45 54 SIETE   FCC   "SIETEn"
. 400F 45 6E
  4011 53 45 49 53 SEIS    FCC   "SEISn"
. 4015 6E
  4016 43 49 4E 43 CINCO   FCC   "CINCOn"
. 401A 4F 6E
  401C 43 55 41 54 CUATRO  FCC   "CUATROn"
. 4020 52 4F 6E
  4023 54 52 45 53 TRES    FCC   "TRESn"
. 4027 6E
  4028 44 4F 53 6E DOS     FCC   "DOSn"
  402C 4D 49 4C 6E MIL             FCC   "MILn"
  4030 4D 49 4C 4C MILLONES FCC  "MILLONESn"
. 4034 4F 4E 45 53
. 4038 6E
  4039 4E 4F 56 45 NOVECIENTOS     FCC   "NOVECIENTOSn"
. 403D 43 49 45 4E
. 4041 54 54 53 6E
  4045 4F 43 48 4F OCHOCIENTOS     FCC   "OCHOCIENTOSn"
. 4049 43 49 45 4E
. 404D 54 4F 53 6E
  4051 53 45 54 45 SETECIENTOS     FCC   "SETECIENTOSn"
. 4055 43 49 45 4E
. 4059 54 4F 53 6E
  405D 53 45 49 53 SEISCIENTOS     FCC   "SEISCIENTOSn"
. 4061 43 49 45 4E
. 4065 54 4F 53 6E
  4069 51 55 49 4E QUINIENTOS      FCC   "QUINIENTOSn"
. 406D 49 45 4E 54
. 4071 4F 53 6E
  4074 43 55 41 54 CUATROCIENTOS   FCC   "CUATROCIENTOSn"
. 4078 52 4F 43 49
. 407C 45 4E 54 4F
. 4080 53 6E
  4082 54 52 45 53 TRESCIENTOS     FCC   "TRESCIENTOSn"
. 4086 43 49 45 4E
. 408A 54 4F 53 6E
  408E 44 4F 53 43 DOSCIENTOS      FCC   "DOSCIENTOSn"
. 4092 49 45 4E 54
. 4096 4F 53 6E
  4099 43 49 45 4E CIENTO          FCC   "CIENTOn"
. 409D 54 4F 6E
  40A0 43 49 45 4E CIEN            FCC   "CIENn"
. 40A4 6E
  40A5 4E 4F 56 45 NOVENTA         FCC   "NOVENTAn"
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE       4

. 40A9 4E 54 41 6E
  40AD 4F 43 48 45 OCHENTA         FCC   "OCHENTAn"
. 40B1 4E 54 41 6E
  40B5 53 45 54 45 SETENTA         FCC   "SETENTAn"
. 40B9 4E 54 41 6E
  40BD 53 45 53 45 SESENTA         FCC   "SESENTAn"
. 40C1 4E 54 41 6E
  40C5 43 49 4E 43 CINCUENTA       FCC   "CINCUENTAn"
. 40C9 55 45 4E 54
. 40CD 41 6E
  40CF 43 55 41 52 CUARENTA        FCC   "CUARENTAn"
. 40D3 45 4E 54 41
. 40D7 6E
  40D8 54 52 45 49 TREINTA         FCC   "TREINTAn"
. 40DC 4E 54 41 6E
  40E0 56 45 49 4E VEINTE          FCC   "VEINTEn"
. 40E4 54 45 6E
  40E7 44 49 45 5A DIEZ    FCC   "DIEZn"
. 40EB 6E
  40EC 56 45 49 4E VEINTICINCO     FCC   "VEINTICINCOn"
. 40F0 54 49 43 49
. 40F4 4E 43 4F 6E
  40F8 51 55 49 4E QUINCE          FCC   "QUINCEn"
. 40FC 43 45 6E
  40FF 59 20 43 49 Y_CINCO         FCC   "Y CINCOn"
. 4103 4E 43 4F 6E
  4107 50 45 53 4F PESOS           FCC   "PESOSn"
. 410B 53 6E

                   INICIO
  410D 8E 00 EE        LDS   #$00EE
  4110 BD 43 9E        JSR   SERIAL

                   LIMPIAR
  4113 7F 02 02            CLR A
  4116 7F 02 04            CLR AU
  4119 7F 02 05            CLR AD
  411C 7F 02 06            CLR AC
  411F 7F 02 07            CLR TA
  4122 7F 02 12            CLR B
  4125 7F 02 14            CLR BD
  4128 7F 02 15            CLR BC
  412B 7F 02 16            CLR BUM
  412E 7F 02 17            CLR TB
  4131 7F 02 22            CLR C
  4134 7F 02 24            CLR CD
  4137 7F 02 25            CLR CC
  413A 7F 02 26            CLR CUM
  413D 7F 02 27            CLR TC
  4140 7F 02 32            CLR D
  4143 7F 02 34            CLR DC
  4146 7F 02 35            CLR DUM
  4149 7F 02 36            CLR DDM
  414C 7F 02 37            CLR TD
  414F 7F 02 42            CLR E
  4152 7F 02 44            CLR EC
  4155 7F 02 45            CLR EUM
  4158 7F 02 46            CLR EDM
  415B 7F 02 47            CLR TE
  415E 7F 02 52            CLR F
  4161 7F 02 54            CLR FUM
  4164 7F 02 55            CLR FDM
  4167 7F 02 56            CLR FCM
  416A 7F 02 57            CLR TF
  416D 7F 02 62            CLR G
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE       5

  4170 7F 02 64            CLR GUM
  4173 7F 02 65            CLR GDM
  4176 7F 02 66            CLR GCM
  4179 7F 02 67            CLR TG
  417C 7F 02 72            CLR H
  417F 7F 02 74            CLR HDM
  4182 7F 02 75            CLR HCM
  4185 7F 02 76            CLR HUMI
  4188 7F 02 77            CLR TH
  418B 7F 02 82            CLR I
  418E 7F 02 84            CLR IDM
  4191 7F 02 85            CLR ICM
  4194 7F 02 86            CLR IUMI
  4197 7F 02 87            CLR IDMI
  419A 7F 02 88            CLR TI
  419D 7F 02 92            CLR J
  41A0 7F 02 94            CLR JCM
  41A3 7F 02 95            CLR JUMI
  41A6 7F 02 96            CLR JDMI
  41A9 7F 02 97            CLR TJ
  41AC 7F 00 17            CLR UT
  41AF 7F 00 16            CLR DT
  41B2 7F 00 15            CLR CT
  41B5 7F 00 14            CLR UMT
  41B8 7F 00 13            CLR DMT
  41BB 7F 00 12            CLR CMT
  41BE 7F 00 11            CLR UMIT
  41C1 7F 00 10            CLR DMIT
  41C4 7F 00 50            CLR TOTAL

  41C7 C6 2B               LDAB #'+
  41C9 D7 02               STAB SIGNO
                   ENCICLATE
  41CB 86 3F               LDAA #'?
  41CD 97 00               STAA ORDEN
  41CF D6 02               LDAB SIGNO
                   CICLO
  41D1 96 00               LDAA ORDEN
  41D3 81 3F               CMPA #'?
  41D5 27 FA               BEQ CICLO
  41D7 C1 3F               CMPB #'?
  41D9 27 32               BEQ CAMBIAR_SIGNO
  41DB 81 4E               CMPA #'N
  41DD 27 2B               BEQ PUENTE_LIMPIAR
  41DF 81 41               CMPA #'A
  41E1 27 60               BEQ MODIFICAR_A
  41E3 81 42               CMPA #'B
  41E5 27 67               BEQ MODIFICAR_B
  41E7 81 43               CMPA #'C
  41E9 27 6E               BEQ MODIFICAR_C
  41EB 81 44               CMPA #'D
  41ED 27 75               BEQ MODIFICAR_D
  41EF 81 45               CMPA #'E
  41F1 27 7C               BEQ MODIFICAR_E
  41F3 81 46               CMPA #'F
  41F5 27 3A               BEQ PUENTE_F
  41F7 81 47               CMPA #'G
  41F9 27 39               BEQ PUENTE_G
  41FB 81 48               CMPA #'H
  41FD 27 38               BEQ PUENTE_H
  41FF 81 49               CMPA #'I
  4201 27 37               BEQ PUENTE_I
  4203 81 4A               CMPA #'J
  4205 27 36               BEQ PUENTE_J
  4207 7E 41 CB            JMP ENCICLATE
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE       6


                   PUENTE_LIMPIAR
  420A 7E 41 13            JMP LIMPIAR

                   CAMBIAR_SIGNO
  420D 81 2B               CMPA #'+
  420F 27 12               BEQ SUMAR
  4211 81 2D               CMPA #'-
  4213 27 15               BEQ RESTAR
  4215 81 3D               CMPA #'=
  4217 26 B2               BNE ENCICLATE
  4219 7E 43 5B            JMP CALCULAR

                   QUITAR_SIGNO
  421C C6 3F               LDAB #'?
  421E D7 02               STAB SIGNO
  4220 7E 41 CB            JMP ENCICLATE

                   SUMAR
  4223 C6 2B               LDAB #'+
  4225 D7 02               STAB SIGNO
  4227 7E 41 CB            JMP ENCICLATE

                   RESTAR
  422A C6 2D               LDAB #'-
  422C D7 02               STAB SIGNO
  422E 7E 41 CB            JMP ENCICLATE

                   PUENTE_F
  4231 7E 42 7A            JMP MODIFICAR_F

                   PUENTE_G
  4234 7E 42 85            JMP MODIFICAR_G

                   PUENTE_H
  4237 7E 42 90            JMP MODIFICAR_H

                   PUENTE_I
  423A 7E 42 9B            JMP MODIFICAR_I

                   PUENTE_J
  423D 7E 42 A6            JMP MODIFICAR_J

                   PUENTE_ENCICLATE
  4240 7E 41 CB            JMP ENCICLATE

                   MODIFICAR_A
  4243 C1 2B               CMPB #'+
  4245 27 6D               BEQ AGREGAR_A
  4247 C1 2D               CMPB #'-
  4249 26 F5               BNE PUENTE_ENCICLATE
  424B 7E 43 0B            JMP QUITAR_A

                   MODIFICAR_B
  424E C1 2B               CMPB #'+
  4250 27 6B               BEQ AGREGAR_B
  4252 C1 2D               CMPB #'-
  4254 26 EA               BNE PUENTE_ENCICLATE
  4256 7E 43 13            JMP QUITAR_B

                   MODIFICAR_C
  4259 C1 2B               CMPB #'+
  425B 27 69               BEQ AGREGAR_C
  425D C1 2D               CMPB #'-
  425F 26 DF               BNE PUENTE_ENCICLATE
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE       7

  4261 7E 43 1B            JMP QUITAR_C

                   MODIFICAR_D
  4264 C1 2B               CMPB #'+
  4266 27 67               BEQ AGREGAR_D
  4268 C1 2D               CMPB #'-
  426A 26 D4               BNE PUENTE_ENCICLATE
  426C 7E 43 23            JMP QUITAR_D

                   MODIFICAR_E
  426F C1 2B               CMPB #'+
  4271 27 65               BEQ AGREGAR_E
  4273 C1 2D               CMPB #'-
  4275 26 C9               BNE PUENTE_ENCICLATE
  4277 7E 43 2B            JMP QUITAR_E

                   MODIFICAR_F
  427A C1 2B               CMPB #'+
  427C 27 63               BEQ AGREGAR_F
  427E C1 2D               CMPB #'-
  4280 26 BE               BNE PUENTE_ENCICLATE
  4282 7E 43 33            JMP QUITAR_F

                   MODIFICAR_G
  4285 C1 2B               CMPB #'+
  4287 27 61               BEQ AGREGAR_G
  4289 C1 2D               CMPB #'-
  428B 26 B3               BNE PUENTE_ENCICLATE
  428D 7E 43 3B            JMP QUITAR_G

                   MODIFICAR_H
  4290 C1 2B               CMPB #'+
  4292 27 5F               BEQ AGREGAR_H
  4294 C1 2D               CMPB #'-
  4296 26 A8               BNE PUENTE_ENCICLATE
  4298 7E 43 43            JMP QUITAR_H

                   MODIFICAR_I
  429B C1 2B               CMPB #'+
  429D 27 5D               BEQ AGREGAR_I
  429F C1 2D               CMPB #'-
  42A1 26 9D               BNE PUENTE_ENCICLATE
  42A3 7E 43 4B            JMP QUITAR_I

                   MODIFICAR_J
  42A6 C1 2B               CMPB #'+
  42A8 27 5B               BEQ AGREGAR_J
  42AA C1 2D               CMPB #'-
  42AC 26 92               BNE PUENTE_ENCICLATE
  42AE 7E 43 53            JMP QUITAR_J


                   ERROR_A
  42B1 BD 43 5E            JSR ERROR
                   AGREGAR_A
  42B4 7C 02 02            INC A
  42B7 7E 42 1C            JMP QUITAR_SIGNO

                   ERROR_B
  42BA BD 43 5E            JSR ERROR
                   AGREGAR_B
  42BD 7C 02 12            INC B
  42C0 7E 42 1C            JMP QUITAR_SIGNO

                   ERROR_C
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE       8

  42C3 BD 43 5E            JSR ERROR
                   AGREGAR_C
  42C6 7C 02 22            INC C
  42C9 7E 42 1C            JMP QUITAR_SIGNO

                   ERROR_D
  42CC BD 43 5E            JSR ERROR
                   AGREGAR_D
  42CF 7C 02 32            INC D
  42D2 7E 42 1C            JMP QUITAR_SIGNO

                   ERROR_E
  42D5 BD 43 5E            JSR ERROR
                   AGREGAR_E
  42D8 7C 02 42            INC E
  42DB 7E 42 1C            JMP QUITAR_SIGNO

                   ERROR_F
  42DE BD 43 5E            JSR ERROR
                   AGREGAR_F
  42E1 7C 02 52            INC F
  42E4 7E 42 1C            JMP QUITAR_SIGNO

                   ERROR_G
  42E7 BD 43 5E            JSR ERROR
                   AGREGAR_G
  42EA 7C 02 62            INC G
  42ED 7E 42 1C            JMP QUITAR_SIGNO

                   ERROR_H
  42F0 BD 43 5E            JSR ERROR
                   AGREGAR_H
  42F3 7C 02 72            INC H
  42F6 7E 42 1C            JMP QUITAR_SIGNO

                   ERROR_I
  42F9 BD 43 5E            JSR ERROR
                   AGREGAR_I
  42FC 7C 02 82            INC I
  42FF 7E 42 1C            JMP QUITAR_SIGNO

                   ERROR_J
  4302 BD 43 5E            JSR ERROR
                   AGREGAR_J
  4305 7C 02 92            INC J
  4308 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_A
  430B 7A 02 02            DEC A
  430E 2D A1               BLT ERROR_A
  4310 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_B
  4313 7A 02 12            DEC B
  4316 2D A2               BLT ERROR_B
  4318 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_C
  431B 7A 02 22            DEC C
  431E 2D A3               BLT ERROR_C
  4320 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_D
  4323 7A 02 32            DEC D
  4326 2D A4               BLT ERROR_D
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE       9

  4328 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_E
  432B 7A 02 42            DEC E
  432E 2D A5               BLT ERROR_E
  4330 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_F
  4333 7A 02 52            DEC F
  4336 2D A6               BLT ERROR_F
  4338 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_G
  433B 7A 02 62            DEC G
  433E 2D A7               BLT ERROR_G
  4340 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_H
  4343 7A 02 72            DEC H
  4346 2D A8               BLT ERROR_H
  4348 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_I
  434B 7A 02 82            DEC I
  434E 2D A9               BLT ERROR_I
  4350 7E 42 1C            JMP QUITAR_SIGNO

                   QUITAR_J
  4353 7A 02 92            DEC J
  4356 2D AA               BLT ERROR_J
  4358 7E 42 1C            JMP QUITAR_SIGNO

                   CALCULAR
  435B BD 43 7F            JSR LIMPIAR_ERROR

                   **************************************************
                   *              SUBRUTINA DE ERROR                *
                   **************************************************
                   ERROR
  435E 86 5B               LDAA  #'[
  4360 97 30               STAA  ERR1
  4362 86 2D               LDAA  #'-
  4364 97 31               STAA  ERR2
  4366 86 5D               LDAA  #']
  4368 97 32               STAA  ERR3
  436A 86 45               LDAA  #'E
  436C 97 33               STAA  ERR4
  436E 86 52               LDAA  #'R
  4370 97 34               STAA  ERR5
  4372 86 52               LDAA  #'R
  4374 97 35               STAA  ERR6
  4376 86 4F               LDAA  #'O
  4378 97 36               STAA  ERR7
  437A 86 52               LDAA  #'R
  437C 97 37               STAA  ERR8
  437E 39                  RTS

                   LIMPIAR_ERROR
  437F C6 32       ESPERAR LDAB #C50
  4381 01                  NOP
  4382 5A                  DECB
  4383 27 FA               BEQ ESPERAR
  4385 7F 00 30            CLR  ERR1
  4388 7F 00 31            CLR  ERR2
  438B 7F 00 32            CLR  ERR3
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE      10

  438E 7F 00 33            CLR  ERR4
  4391 7F 00 34            CLR  ERR5
  4394 7F 00 35            CLR  ERR6
  4397 7F 00 36            CLR  ERR7
  439A 7F 00 37            CLR  ERR8
  439D 39                  RTS

                   **************************************************
                   * SUBRUTINA  DE CONFIGURACION PUERTO SERIAL      *
                   **************************************************
                   SERIAL
  439E CC 30 2C        LDD   #$302C  * CONFIGURA PUERTO SERIAL
  43A1 B7 10 2B        STAA  BAUD    * BAUD  9600  para cristal de 8MHz
  43A4 F7 10 2D        STAB  SCCR2   * HABILITA  RX Y TX PERO INTERRUPCN SOLO RX
  43A7 86 00           LDAA  #$00
  43A9 B7 10 2C        STAA  SCCR1   * 8 BITS

  43AC 86 FE           LDAA  #$FE    * CONFIG PUERTO D COMO SALIDAS (EXCEPTO
.                  PD0)
  43AE B7 10 09        STAA  DDRD    * SEA  ENABLE DEL DISPLAY  PD4  Y RS PD3

  43B1 86 04           LDAA  #$04
  43B3 B7 10 3C        STAA  HPRIO

  43B6 86 00           LDAA  #$00
  43B8 06              TAP
  43B9 39              RTS
                   ***********************************
                   * ATENCION A INTERRUPCION SERIAL
                   ***********************************
                       ORG  $F100

  F100 B6 10 2E        LDAA SCSR
  F103 B6 10 2F        LDAA SCDR
  F106 97 00           STAA ORDEN
  F108 7A 00 01        DEC  VAR
  F10B 3B              RTI

                   ***********************************
                   * VECTOR INTERRUPCION SERIAL
                   ***********************************
                       ORG   $FFD6
  FFD6 F1 00           FCB   $F1,$00

                   ***********************************
                   *RESET
                   ***********************************
                       ORG    $FFFE
  FFFE 80 00       RESET  FCB    $80,$00
                   ***********************************


                   ********
                   ***TODO LO SIGUIENTE USA LA DIRECTIVA FCC PARA ESCRIBIR LA
.                  INFROAMCIN DEL TICKET, AL ESTAR AL FINAL NO TIENE EL PROBLEMA
.                  DE IMPRIMIR LOS OPCODES
                   ********
                           ORG   $0040
  0040 54 49 43 4B MSG1    FCC   'TICKET'
. 0044 45 54
                           ORG   $0050
  0050 2D 2D 2D 2D MSG2    FCC   '----------------'
. 0054 2D 2D 2D 2D
. 0058 2D 2D 2D 2D
. 005C 2D 2D 2D 2D
  ADDR B1 B2 B3 B4 D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE      11

                           ORG   $0100
  0100 2D 2D 2D 2D MSG3    FCC   '----------------'
. 0104 2D 2D 2D 2D
. 0108 2D 2D 2D 2D
. 010C 2D 2D 2D 2D
                           ORG   $0110
  0110 54 4F 54 41 MSG4    FCC   'TOTAL:'
. 0114 4C 3A
                           END

  Symbol Table 

  MSG3               0100
  TI                 0288
  MSG4               0110
  TJ                 0297
  CUARENTA           40CF
  CC                 0225
  CMT                0012
  JUMI               0295
  CD                 0224
  UMIT               0011
  HCM                0275
  CUATROCIENTOS      4074
  TRES               4023
  CT                 0015
  MODIFICAR_A        4243
  MODIFICAR_B        424E
  MODIFICAR_C        4259
  MODIFICAR_D        4264
  MODIFICAR_E        426F
  CIENTO             4099
  MODIFICAR_F        427A
  DC                 0234
  MODIFICAR_G        4285
  SERIAL             439E
  MODIFICAR_H        4290
  MODIFICAR_I        429B
  HDM                0274
  MODIFICAR_J        42A6
  OPTION             1039
  OCHOCIENTOS        4045
  NUEVE              4000
  UT                 0017
  EUM                0245
  MILLONES           4030
  SETECIENTOS        4051
  DT                 0016
  ERROR              435E
  EDM                0246
  EC                 0244
  BUM                0216
  PUENTE_ENCICLATE   4240
  QUINIENTOS         4069
  SIETE              400B
  A                  0202
  B                  0212
  C                  0222
  D                  0232
  E                  0242
  F                  0252
  LIMPIAR            4113
  G                  0262
  H                  0272
  I                  0282
  Symbol Table     D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE      12

  J                  0292
  DMIT               0010
  RESTAR             422A
  DIR_BASE           0060
  CSCTL              105D
  PACTL              1026
  PUENTE_F           4231
  PUENTE_G           4234
  PUENTE_H           4237
  PUENTE_I           423A
  IDMI               0287
  PUENTE_J           423D
  TMSK2              1024
  SCCR1              102C
  SCCR2              102D
  PUENTE_LIMPIAR     420A
  C10                000A
  HUMI               0276
  DMT                0013
  ICM                0285
  SEISCIENTOS        405D
  BAUD               102B
  CIEN               40A0
  CINCO              4016
  CICLO              41D1
  DOSCIENTOS         408E
  AGREGAR_A          42B4
  AGREGAR_B          42BD
  AGREGAR_C          42C6
  AGREGAR_D          42CF
  FCM                0256
  AGREGAR_E          42D8
  AGREGAR_F          42E1
  NOVECIENTOS        4039
  VAR                0001
  AGREGAR_G          42EA
  ADCTL              1030
  AGREGAR_H          42F3
  AGREGAR_I          42FC
  AGREGAR_J          4305
  IDM                0284
  ARTT               0300
  FUM                0254
  CINCUENTA          40C5
  QUITAR_SIGNO       421C
  TFLG2              1025
  PESOS              4107
  FDM                0255
  DOS                4028
  CUM                0226
  Y_CINCO            40FF
  OPT2               1038
  SIGNO              0002
  QUITAR_A           430B
  QUITAR_B           4313
  QUITAR_C           431B
  QUITAR_D           4323
  QUITAR_E           432B
  QUITAR_F           4333
  QUITAR_G           433B
  QUITAR_H           4343
  QUITAR_I           434B
  QUITAR_J           4353
  ESPERAR            437F
  C50                0032
  Symbol Table     D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE      13

  CAMBIAR_SIGNO      420D
  ERR1               0030
  ERR2               0031
  RESET              FFFE
  ERR3               0032
  ERR4               0033
  ENCICLATE          41CB
  ERR5               0034
  TREINTA            40D8
  ERR6               0035
  JDMI               0296
  ERR7               0036
  TRESCIENTOS        4082
  ERR8               0037
  ERROR_A            42B1
  ERROR_B            42BA
  ERROR_C            42C3
  ERROR_D            42CC
  ERROR_E            42D5
  ERROR_F            42DE
  ERROR_G            42E7
  VEINTICINCO        40EC
  ERROR_H            42F0
  ERROR_I            42F9
  ERROR_J            4302
  ORDEN              0000
  JCM                0294
  HPRIO              103C
  IUMI               0286
  GCM                0266
  OCHO               4006
  SCSR               102E
  DIEZ               40E7
  LIMPIAR_ERROR      437F
  GUM                0264
  ADR1               1031
  ADR2               1032
  ADR3               1033
  ADR4               1034
  SUMAR              4223
  GDM                0265
  UMT                0014
  DUM                0235
  PORTA              1000
  SEIS               4011
  NOVENTA            40A5
  TOTAL              0050
  PORTD              1008
  SETENTA            40B5
  PORTE              100A
  PORTG              1002
  CUATRO             401C
  DDM                0236
  DDRA               1001
  OCHENTA            40AD
  DDRD               1009
  DDRG               1003
  DIR_IMP            007B
  SCDR               102F
  CALCULAR           435B
  VEINTE             40E0
  AC                 0206
  AD                 0205
  PACNT              1027
  SESENTA            40BD
  Symbol Table     D:\Downloads\CajaRegistradora\CajaRegistradora.  PAGE      14

  AU                 0204
  SPCR               1028
  BC                 0215
  QUINCE             40F8
  MIL                402C
  BD                 0214
  BCD1               0060
  BCD2               0061
  INICIO             410D
  BCD3               0062
  TA                 0207
  TB                 0217
  TC                 0227
  TD                 0237
  TE                 0247
  TF                 0257
  MSG1               0040
  TG                 0267
  MSG2               0050
  TH                 0277
